# ВСЕ ВОЗМОЖНЫЕ ЗАПРОСЫ К СЕРВЕРУ (13 ЗАПРОСОВ)

это краткое описание возможностей данного бекенда для простоты его связывания с фронтом и исправления проблем (не за что)

Все запросы начинаются с /api !!!!
# Admin (4 запроса):
1 Авторизация
Запрос: POST /auth/login
Тело:
{
    "login":"admin",
    "password":"admin"
}
Ответ сервера:
{
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEsImxvZ2luIjoiYWRtaW4iLCJyb2xlIjoic3VwZXJhZG1pbiIsImlhdCI6MTc1ODA0NzQyOSwiZXhwIjoxNzU4NjUyMjI5fQ.O8uor8nFYaE3JSywRILi_iKavEbQkXaSKBtsBVJ02jA",
    "user": {
        "id": 1,
        "login": "admin",
        "role": "superadmin"
    }
}
2 Добавление нового admin-а (может только существующий admin тое нужен уже полученный jwt токен)
Запрос: POST /admins
Тело:
{
    "login":"admin2",
    "password":"admin2"
}
Ответ сервера:
{
    "id": 2,
    "login": "admin2",
    "role": "admin"
}
3 Удаление Админа (может только суперадмин)
Запрос: DELETE /admins/:login (пример /admins/admin2)
Тела нет
Ответ сервера:
{
    "ok": true
}
4 Список всех админов (может только существующий admin тое нужен уже полученный jwt токен)
Запрос: GET /admins
Ответ сервера:
[
    {
        "id": 1,
        "login": "admin",
        "role": "superadmin"
    },
    {
        "id": 3,
        "login": "admin2",
        "role": "admin"
    }
]
# Doctor (4 запроса)
1 Получение списка всех докторов (публично — токен не нужен)
Запрос: GET /doctors
Ответ сервера:
[
    {
        "id": 1,
        "name": "Иванов Александр",
        "specialty": "Главный терапевт",
        "experience": "22 лет",
        "degree": "Врач высшей категории",
        "imageUrl": "https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=400&h=400&fit=crop"
    },
    {
        "id": 2,
        "name": "Иванов Александр",
        "specialty": "Главный терапевт",
        "experience": "22 лет",
        "degree": "Врач высшей категории",
        "imageUrl": "https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=400&h=400&fit=crop"
    }
]
2 Добавление нового доктора (нужен токен admin или superadmin)
Запрос: POST /doctors
Тело (пример):
{
  "name": "Иванов Александр",
  "specialty": "Главный терапевт",
  "startedAt": "2003-06-01",
  "degree": "Врач высшей категории",
  "imageUrl": "https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=400&h=400&fit=crop"
}
Ответ сервера:
{
    "id": 1,
    "name": "Иванов Александр",
    "specialty": "Главный терапевт",
    "startedAt": "2003-06-01",
    "experience": "22 лет",
    "degree": "Врач высшей категории",
    "imageUrl": "https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=400&h=400&fit=crop"
}
3 Удаление доктора (нужен токен admin или superadmin)
Запрос: DELETE /doctors/:id (например /doctors/1)
Ответ сервера:
{
    "ok": true
}
4 изменение врача
Запрос PUT /doctors/:id (/doctors/1)
Тело:
{
  "name": "Магамедов Магамед",
  "specialty": "Главный терапевт по жопам",
  "startedAt": "2003-06-01",
  "degree": "Врач высшей категории",
  "imageUrl": "https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=400&h=400&fit=crop"
}
Ответ сервера:
{
    "id": 1,
    "name": "Магамедов Магамед",
    "specialty": "Главный терапевт по жопам",
    "startedAt": "2003-06-01",
    "experience": "22 лет",
    "degree": "Врач высшей категории",
    "imageUrl": "https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=400&h=400&fit=crop"
}
# Calendar (5 запросов)
Все календарные запросы публичные — токен не нужен.
Слоты по умолчанию: каждые 30 минут c 09:00 до 12:30 (последний слот), будни. поменять можно в /src/booking/routes.js
Прошедшие даты/время и полностью занятые дни помечаются как unavailable.
1 Доступность по дням месяца (public)
Запрос:
GET /availability?doctorId=1&year=2025&month=9
doctorId — ID врача (число)
year — год (число)
month — месяц 1..12 (число)
Ответ сервера:
[
    {
        "day": 1,
        "status": "unavailable"
    },
    {
        "day": 2,
        "status": "unavailable"
    },
    .....
    .....
]
2 Тайм-слоты на выбранную дату
Запрос: GET /timeslots?doctorId=1&date=2025-09-20
Ответ сервера:
[
    {
        "time": "09:00",
        "status": "available"
    },
    {
        "time": "09:30",
        "status": "available"
    }
    ....
    ....
]
3 Создание записи (занять какой то слот)
Запрос: POST /book
Тело:
{
  "doctorId": 1,
  "date": "2025-09-20",
  "time": "10:30",
  "patientName": "Иван",
  "patientPhone": "+77001234567"
}
Ответ сервера:
{
    "success": true,
    "message": "Запись успешно создана"
}
4 Список записей (просмотр, фильтры, пагинация)
Запрос:
GET /appointments?doctorId=&date=YYYY-MM-DD&from=YYYY-MM-DD&to=YYYY-MM-DD&page=1&limit=20
Если не переданы date, from/to — по умолчанию возвращаются записи с сегодняшнего дня и в будущее.
Можно фильтровать:
doctorId — по ID врача
date — точная дата (YYYY-MM-DD)
или интервал from/to (YYYY-MM-DD)
Пагинация:
page (по умолчанию 1)
limit (по умолчанию 20, максимум 100)
Сортировка: по date ASC, затем по time ASC.
Пример запроса:
appointments?doctorId=1&from=2025-09-18&to=2025-09-30&page=1&limit=50
Ответ сервера:
{
    "items": [
        {
            "id": 1,
            "doctorId": 1,
            "doctorName": "Иванов Александр",
            "date": "2025-09-20",
            "time": "10:30",
            "patientName": "Иван",
            "patientPhone": "+77001234567",
            "createdAt": "2025-09-16T20:16:18.596Z"
        }
    ],
    "page": 1,
    "limit": 50,
    "total": 1
}
5 Удаление записи (освобождение слота)
Запрос:
DELETE /appointments/:id
Например: /appointments/1
Ответ (успех):
{
    "ok": true
}